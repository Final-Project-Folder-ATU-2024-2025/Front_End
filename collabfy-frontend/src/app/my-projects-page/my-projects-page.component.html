<app-header></app-header>

<div class="my-projects-container">
  <!-- Page header with title and subtitle -->
  <div class="page-header">
    <h1>Project Overview</h1>
    <p class="page-subtitle">
      Dive into the details of each project, including deadlines, collaborators, project status and more.
    </p>
  </div>

  <!-- New centered section for Organized Project Categories text -->
  <div class="categories-text">
    <h2>Organized Project Categories</h2>
    <p>
      Navigate through projects grouped by relevant categories for easy access.
    </p>
  </div>

  <!-- Filter section (centered) -->
  <div class="project-filters">
    <div class="filter-container" (click)="filterInProgress()">
      <img class="filter-image" src="/assets/images/my_projects/myprojects_img1.jpg" alt="In Progress">
      <p>In Progress</p>
    </div>
    <div class="filter-container" (click)="filterComplete()">
      <img class="filter-image" src="/assets/images/my_projects/myprojects_img4.jpg" alt="Complete">
      <p>Complete</p>
    </div>
  </div>

  <!-- Centered View All Projects button -->
  <div class="view-all-container">
    <button class="view-all-button" (click)="viewAllProjects()">View All Projects</button>
  </div>

  <!-- Board container for project list -->
  <div class="projects-board">
    <!-- Board header row with light gray background -->
    <div class="board-header">
      <div class="column project-name">Project Name</div>
      <div class="column deadline">Deadline</div>
      <div class="column collaborators">Collaborators</div>
      <div class="column status">Status</div>
      <div class="column action">Action</div>
    </div>

    <!-- Each project row -->
    <div class="project-item" *ngFor="let project of getDisplayedProjects()">
      <div class="row">
        <!-- Project Name with image (changes based on status) -->
        <div class="column project-name">
          <img
            class="project-image"
            [src]="(project.status || 'In Progress') === 'Complete' ? '/assets/images/my_projects/myprojects_img4.jpg' : '/assets/images/my_projects/myprojects_img1.jpg'"
            alt="Project Image"
          />
          <span>{{ project.projectName }}</span>
        </div>
        <!-- Deadline -->
        <div class="column deadline">
          {{ project.deadline | date }}
        </div>
        <!-- Collaborators -->
        <div class="column collaborators">
          <ng-container *ngIf="project.team && project.team.length > 0; else noCollaborators">
            <ul>
              <li *ngFor="let member of project.team">
                {{ member.firstName }} {{ member.surname }}
              </li>
            </ul>
          </ng-container>
          <ng-template #noCollaborators>
            <span>N/A</span>
          </ng-template>
        </div>
        <!-- Status with colored background -->
        <div class="column status">
          <span
            [ngClass]="{
              'in-progress-status': (project.status || 'In Progress') === 'In Progress',
              'complete-status': project.status === 'Complete'
            }"
          >
            {{ project.status || 'In Progress' }}
          </span>
        </div>
        <!-- Action Buttons -->
        <div class="column action">
          <button (click)="updateProject(project)">Update Project</button>
          <button (click)="markStatusToggle(project)">
            {{ (project.status || 'In Progress') === 'Complete' ? 'Mark as In Progress' : 'Mark as Complete' }}
          </button>
          <button (click)="deleteProject(project)">Delete Project</button>
        </div>
      </div>
    </div>
  </div>
</div>

<app-footer></app-footer>
